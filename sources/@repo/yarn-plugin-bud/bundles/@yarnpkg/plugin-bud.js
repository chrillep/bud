/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-bud",
factory: function (require) {
var plugin=(()=>{var eo=Object.create;var te=Object.defineProperty;var nr=Object.getOwnPropertyDescriptor;var ro=Object.getOwnPropertyNames;var no=Object.getPrototypeOf,io=Object.prototype.hasOwnProperty;var y=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),oo=(t,e)=>{for(var r in e)te(t,r,{get:e[r],enumerable:!0})},ir=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ro(e))!io.call(t,i)&&i!==r&&te(t,i,{get:()=>e[i],enumerable:!(n=nr(e,i))||n.enumerable});return t};var yt=(t,e,r)=>(r=t!=null?eo(no(t)):{},ir(e||!t||!t.__esModule?te(r,"default",{value:t,enumerable:!0}):r,t)),so=t=>ir(te({},"__esModule",{value:!0}),t),ct=(t,e,r,n)=>{for(var i=n>1?void 0:n?nr(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&te(e,r,i),i};var cr=v((du,ar)=>{var ao="Expected a function",or=NaN,co="[object Symbol]",uo=/^\s+|\s+$/g,lo=/^[-+]0x[0-9a-f]+$/i,po=/^0b[01]+$/i,fo=/^0o[0-7]+$/i,mo=parseInt,yo=typeof global=="object"&&global&&global.Object===Object&&global,ho=typeof self=="object"&&self&&self.Object===Object&&self,go=yo||ho||Function("return this")(),bo=Object.prototype,wo=bo.toString,vo=Math.max,xo=Math.min,je=function(){return go.Date.now()};function So(t,e,r){var n,i,o,s,a,u,h=0,c=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(ao);e=sr(e)||0,Oe(r)&&(c=!!r.leading,p="maxWait"in r,o=p?vo(sr(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function l(w){var T=n,R=i;return n=i=void 0,h=w,s=t.apply(R,T),s}function b(w){return h=w,a=setTimeout(S,e),c?l(w):s}function _(w){var T=w-u,R=w-h,g=e-T;return p?xo(g,o-R):g}function x(w){var T=w-u,R=w-h;return u===void 0||T>=e||T<0||p&&R>=o}function S(){var w=je();if(x(w))return P(w);a=setTimeout(S,_(w))}function P(w){return a=void 0,m&&n?l(w):(n=i=void 0,s)}function q(){a!==void 0&&clearTimeout(a),h=0,n=u=i=a=void 0}function et(){return a===void 0?s:P(je())}function Z(){var w=je(),T=x(w);if(n=arguments,i=this,u=w,T){if(a===void 0)return b(u);if(p)return a=setTimeout(S,e),l(u)}return a===void 0&&(a=setTimeout(S,e)),s}return Z.cancel=q,Z.flush=et,Z}function Oe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Co(t){return!!t&&typeof t=="object"}function _o(t){return typeof t=="symbol"||Co(t)&&wo.call(t)==co}function sr(t){if(typeof t=="number")return t;if(_o(t))return or;if(Oe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Oe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(uo,"");var r=po.test(t);return r||fo.test(t)?mo(t.slice(2),r?2:8):lo.test(t)?or:+t}ar.exports=So});var mr=v((yu,fr)=>{var pr="Expected a function",ur=NaN,ko="[object Symbol]",Eo=/^\s+|\s+$/g,$o=/^[-+]0x[0-9a-f]+$/i,jo=/^0b[01]+$/i,Oo=/^0o[0-7]+$/i,Fo=parseInt,Po=typeof global=="object"&&global&&global.Object===Object&&global,qo=typeof self=="object"&&self&&self.Object===Object&&self,To=Po||qo||Function("return this")(),Do=Object.prototype,No=Do.toString,Io=Math.max,Lo=Math.min,Fe=function(){return To.Date.now()};function Ao(t,e,r){var n,i,o,s,a,u,h=0,c=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(pr);e=lr(e)||0,fe(r)&&(c=!!r.leading,p="maxWait"in r,o=p?Io(lr(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function l(w){var T=n,R=i;return n=i=void 0,h=w,s=t.apply(R,T),s}function b(w){return h=w,a=setTimeout(S,e),c?l(w):s}function _(w){var T=w-u,R=w-h,g=e-T;return p?Lo(g,o-R):g}function x(w){var T=w-u,R=w-h;return u===void 0||T>=e||T<0||p&&R>=o}function S(){var w=Fe();if(x(w))return P(w);a=setTimeout(S,_(w))}function P(w){return a=void 0,m&&n?l(w):(n=i=void 0,s)}function q(){a!==void 0&&clearTimeout(a),h=0,n=u=i=a=void 0}function et(){return a===void 0?s:P(Fe())}function Z(){var w=Fe(),T=x(w);if(n=arguments,i=this,u=w,T){if(a===void 0)return b(u);if(p)return a=setTimeout(S,e),l(u)}return a===void 0&&(a=setTimeout(S,e)),s}return Z.cancel=q,Z.flush=et,Z}function Mo(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(pr);return fe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ao(t,e,{leading:n,maxWait:e,trailing:i})}function fe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ro(t){return!!t&&typeof t=="object"}function Wo(t){return typeof t=="symbol"||Ro(t)&&No.call(t)==ko}function lr(t){if(typeof t=="number")return t;if(Wo(t))return ur;if(fe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=fe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Eo,"");var r=jo.test(t);return r||Oo.test(t)?Fo(t.slice(2),r?2:8):$o.test(t)?ur:+t}fr.exports=Mo});var br=v((hu,gr)=>{var Bo="Expected a function",dr=1/0,Jo=17976931348623157e292,yr=0/0,Uo="[object Symbol]",Ho=/^\s+|\s+$/g,Go=/^[-+]0x[0-9a-f]+$/i,Vo=/^0b[01]+$/i,Yo=/^0o[0-7]+$/i,Ko=parseInt,zo=Object.prototype,Xo=zo.toString;function Qo(t,e){var r;if(typeof e!="function")throw new TypeError(Bo);return t=ns(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function Zo(t){return Qo(2,t)}function hr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ts(t){return!!t&&typeof t=="object"}function es(t){return typeof t=="symbol"||ts(t)&&Xo.call(t)==Uo}function rs(t){if(!t)return t===0?t:0;if(t=is(t),t===dr||t===-dr){var e=t<0?-1:1;return e*Jo}return t===t?t:0}function ns(t){var e=rs(t),r=e%1;return e===e?r?e-r:e:0}function is(t){if(typeof t=="number")return t;if(es(t))return yr;if(hr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=hr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Ho,"");var r=Vo.test(t);return r||Yo.test(t)?Ko(t.slice(2),r?2:8):Go.test(t)?yr:+t}gr.exports=Zo});var $r=v((gu,Er)=>{var os="Expected a function",vr="__lodash_hash_undefined__",ss="[object Function]",as="[object GeneratorFunction]",cs=/[\\^$.*+?()[\]{}|]/g,us=/^\[object .+?Constructor\]$/,ls=typeof global=="object"&&global&&global.Object===Object&&global,ps=typeof self=="object"&&self&&self.Object===Object&&self,xr=ls||ps||Function("return this")();function fs(t,e){return t==null?void 0:t[e]}function ms(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var ds=Array.prototype,ys=Function.prototype,Sr=Object.prototype,Pe=xr["__core-js_shared__"],wr=function(){var t=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Cr=ys.toString,qe=Sr.hasOwnProperty,hs=Sr.toString,gs=RegExp("^"+Cr.call(qe).replace(cs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bs=ds.splice,ws=_r(xr,"Map"),ee=_r(Object,"create");function ht(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function vs(){this.__data__=ee?ee(null):{}}function xs(t){return this.has(t)&&delete this.__data__[t]}function Ss(t){var e=this.__data__;if(ee){var r=e[t];return r===vr?void 0:r}return qe.call(e,t)?e[t]:void 0}function Cs(t){var e=this.__data__;return ee?e[t]!==void 0:qe.call(e,t)}function _s(t,e){var r=this.__data__;return r[t]=ee&&e===void 0?vr:e,this}ht.prototype.clear=vs;ht.prototype.delete=xs;ht.prototype.get=Ss;ht.prototype.has=Cs;ht.prototype.set=_s;function Ut(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ks(){this.__data__=[]}function Es(t){var e=this.__data__,r=me(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():bs.call(e,r,1),!0}function $s(t){var e=this.__data__,r=me(e,t);return r<0?void 0:e[r][1]}function js(t){return me(this.__data__,t)>-1}function Os(t,e){var r=this.__data__,n=me(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}Ut.prototype.clear=ks;Ut.prototype.delete=Es;Ut.prototype.get=$s;Ut.prototype.has=js;Ut.prototype.set=Os;function gt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Fs(){this.__data__={hash:new ht,map:new(ws||Ut),string:new ht}}function Ps(t){return de(this,t).delete(t)}function qs(t){return de(this,t).get(t)}function Ts(t){return de(this,t).has(t)}function Ds(t,e){return de(this,t).set(t,e),this}gt.prototype.clear=Fs;gt.prototype.delete=Ps;gt.prototype.get=qs;gt.prototype.has=Ts;gt.prototype.set=Ds;function me(t,e){for(var r=t.length;r--;)if(Ms(t[r][0],e))return r;return-1}function Ns(t){if(!kr(t)||Ls(t))return!1;var e=Rs(t)||ms(t)?gs:us;return e.test(As(t))}function de(t,e){var r=t.__data__;return Is(e)?r[typeof e=="string"?"string":"hash"]:r.map}function _r(t,e){var r=fs(t,e);return Ns(r)?r:void 0}function Is(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ls(t){return!!wr&&wr in t}function As(t){if(t!=null){try{return Cr.call(t)}catch{}try{return t+""}catch{}}return""}function Te(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(os);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Te.Cache||gt),r}Te.Cache=gt;function Ms(t,e){return t===e||t!==t&&e!==e}function Rs(t){var e=kr(t)?hs.call(t):"";return e==ss||e==as}function kr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}Er.exports=Te});var Or=v(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});function Ws(t,e,r){let n=r.value;return r.value=function(...i){let o=performance.now(),s=n.apply(this,i),a=performance.now();return console.log(`Call to ${e} took ${(a-o).toFixed(2)} milliseconds.`),s},r}function Bs(t=0){return function(e,r,n){let i=n.value;return n.value=function(...o){setTimeout(()=>{i.apply(this,o)},t)},n}}var Js=cr();function Us(t=0,e={}){return function(r,n,i){let o=new WeakMap,s=i.value;return i.value=function(...a){let u=o.get(this);u||(u=Js(s,t,e).bind(this),o.set(this,u)),u(...a)},i}}var Hs=mr();function Gs(t=0,e={}){return function(r,n,i){let o=i.value;return i.value=Hs(o,t,e),i}}var Vs=br();function Ys(t,e,r){let n=r.value;return r.value=Vs(n),r}function Ks(t){return function(e){t.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{e.prototype[n]=r.prototype[n]})})}}var zs=$r();function Xs(t){return function(e,r,n){return n.value=zs(n.value,t),n}}function Qs(t,e,r){let n=r.value;if(typeof n!="function")throw new Error(`@autobind decorator can only be applied to methods not: ${typeof n}`);let i=!1;return{configurable:!0,get(){if(i||this===t.prototype||this.hasOwnProperty(e)||typeof n!="function")return n;let o=n.bind(this);return i=!0,Object.defineProperty(this,e,{configurable:!0,get(){return o},set(s){n=s,delete this[e]}}),i=!1,o},set(o){n=o}}}var jr=(t,e)=>t<e?-1:t>e?1:0;function Zs(t,e={isDescending:!0,type:"string"}){let r=Symbol();return function(n,i,o){Object.defineProperty(n,i,{set:function(a){if(!a||!Array.isArray(a))throw`Value of property ${i} is not a valid array!`;let u=e.type==="date";t?this[r]=a.sort(function(h,c){let p=u?new Date(h[t]):h[t],m=u?new Date(c[t]):c[t],l=jr(p,m);return e.isDescending?l*-1:l}):this[r]=a.sort(function(h,c){let p=u?new Date(h):h,m=u?new Date(c):c,l=jr(p,m);return e.isDescending?l*-1:l})},get:function(){return this[r]}})}}Y.Mixin=Ks;Y.SortBy=Zs;Y.bind=Qs;Y.debounce=Us;Y.delay=Bs;Y.measure=Ws;Y.memo=Xs;Y.once=Ys;Y.throttle=Gs});var qr=v((Eu,Pr)=>{Pr.exports={name:"bud.js",description:"\u26A1\uFE0F Lightning fast frontend build tools combining the best parts of Symfony Encore and Laravel Mix",logo:"https://cdn.roots.io/app/uploads/logo-bud.svg",card:"https://bud.js.org/img/bud.js.png",url:{discourse:"https://discourse.roots.io/c/bud/24",docs:"https://bud.js.org",git:"git@github.com:roots/bud",web:"https://github.com/roots/bud"},organization:{name:"Roots Software Foundation LLC",site:"https://roots.io",twitter:"https://twitter.com/rootswp",favicon:"https://roots.io/favicon.ico"},contributors:{kellymears:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},qwp6t:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},retlehs:{type:["\u{1F680} steward","\u{1F4D5} docs"]},swalkinshaw:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},joshuafredrickson:{type:["\u{1F4BB} dev","\u{1F4D5} docs"]},alwaysblank:{type:["\u{1F680} steward","\u{1F4D5} docs"]},alexdanylyschyn:{type:["\u{1F4BB} dev"]},clayrisser:{type:["\u{1F4D5} docs"]},catgofire:{type:["\u{1F4D5} docs"]},unlocdavid:{type:["\u{1F4D5} docs"]},robrecord:{type:["\u{1F4D5} docs"]}},sponsors:[{image:"https://cdn.roots.io/app/uploads/km-digital.svg",title:"KM Digital",url:"https://k-m.com/"},{image:"https://cdn.roots.io/app/uploads/carrot.svg",title:"Carrot",url:"https://carrot.com/"},{image:"https://cdn.roots.io/app/uploads/wordpress.svg",title:"WordPress.com",url:"https://wordpress.com/"},{image:"https://cdn.roots.io/app/uploads/pantheon.svg",title:"Pantheon",url:"https://pantheon.io/"},{image:"https://cdn.roots.io/app/uploads/worksite-safety.svg",title:"Worksite Safety",url:"https://worksitesafety.ca/careers/"}],packages:{core:["@roots/bud","@roots/bud-api","@roots/bud-build","@roots/bud-cache","@roots/bud-compiler","@roots/bud-dashboard","@roots/bud-extensions","@roots/bud-framework","@roots/bud-hooks","@roots/bud-server"],extension:["@roots/bud-babel","@roots/bud-compress","@roots/bud-criticalcss","@roots/bud-emotion","@roots/bud-entrypoints","@roots/bud-esbuild","@roots/bud-eslint","@roots/bud-imagemin","@roots/bud-mdx","@roots/bud-postcss","@roots/bud-preset-recommend","@roots/bud-preset-wordpress","@roots/bud-prettier","@roots/bud-purgecss","@roots/bud-react","@roots/bud-sass","@roots/bud-solid","@roots/bud-stylelint","@roots/bud-swc","@roots/bud-tailwindcss","@roots/bud-terser","@roots/bud-typescript","@roots/bud-vue","@roots/bud-wordpress-dependencies","@roots/bud-wordpress-externals","@roots/bud-wordpress-manifests","@roots/sage"],library:["@roots/browserslist-config","@roots/bud-client","@roots/container","@roots/critical-css-webpack-plugin","@roots/dependencies","@roots/entrypoints-webpack-plugin","@roots/eslint-config","@roots/filesystem","@roots/merged-manifest-webpack-plugin","@roots/wordpress-dependencies-webpack-plugin","@roots/wordpress-externals-webpack-plugin","@roots/wordpress-hmr"]}}});var U=v(Le=>{"use strict";Le.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,n)=>{t.call(this,...e,(i,o)=>i!=null?n(i):r(o))})},"name",{value:t.name})};Le.fromPromise=function(t){return Object.defineProperty(function(...e){let r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);t.apply(this,e.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:t.name})}});var Rr=v((zu,Mr)=>{var lt=y("constants"),ra=process.cwd,he=null,na=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return he||(he=ra.call(process)),he};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Ae=process.chdir,process.chdir=function(t){he=null,Ae.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ae));var Ae;Mr.exports=ia;function ia(t){lt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=o(t.chown),t.fchown=o(t.fchown),t.lchown=o(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=s(t.chownSync),t.fchownSync=s(t.fchownSync),t.lchownSync=s(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,p,m){m&&process.nextTick(m)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,p,m,l){l&&process.nextTick(l)},t.lchownSync=function(){}),na==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function p(m,l,b){var _=Date.now(),x=0;c(m,l,function S(P){if(P&&(P.code==="EACCES"||P.code==="EPERM")&&Date.now()-_<6e4){setTimeout(function(){t.stat(l,function(q,et){q&&q.code==="ENOENT"?c(m,l,S):b(P)})},x),x<100&&(x+=10);return}b&&b(P)})}return Object.setPrototypeOf&&Object.setPrototypeOf(p,c),p}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function p(m,l,b,_,x,S){var P;if(S&&typeof S=="function"){var q=0;P=function(et,Z,w){if(et&&et.code==="EAGAIN"&&q<10)return q++,c.call(t,m,l,b,_,x,P);S.apply(this,arguments)}}return c.call(t,m,l,b,_,x,P)}return Object.setPrototypeOf&&Object.setPrototypeOf(p,c),p}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(p,m,l,b,_){for(var x=0;;)try{return c.call(t,p,m,l,b,_)}catch(S){if(S.code==="EAGAIN"&&x<10){x++;continue}throw S}}}(t.readSync);function e(c){c.lchmod=function(p,m,l){c.open(p,lt.O_WRONLY|lt.O_SYMLINK,m,function(b,_){if(b){l&&l(b);return}c.fchmod(_,m,function(x){c.close(_,function(S){l&&l(x||S)})})})},c.lchmodSync=function(p,m){var l=c.openSync(p,lt.O_WRONLY|lt.O_SYMLINK,m),b=!0,_;try{_=c.fchmodSync(l,m),b=!1}finally{if(b)try{c.closeSync(l)}catch{}else c.closeSync(l)}return _}}function r(c){lt.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(p,m,l,b){c.open(p,lt.O_SYMLINK,function(_,x){if(_){b&&b(_);return}c.futimes(x,m,l,function(S){c.close(x,function(P){b&&b(S||P)})})})},c.lutimesSync=function(p,m,l){var b=c.openSync(p,lt.O_SYMLINK),_,x=!0;try{_=c.futimesSync(b,m,l),x=!1}finally{if(x)try{c.closeSync(b)}catch{}else c.closeSync(b)}return _}):c.futimes&&(c.lutimes=function(p,m,l,b){b&&process.nextTick(b)},c.lutimesSync=function(){})}function n(c){return c&&function(p,m,l){return c.call(t,p,m,function(b){h(b)&&(b=null),l&&l.apply(this,arguments)})}}function i(c){return c&&function(p,m){try{return c.call(t,p,m)}catch(l){if(!h(l))throw l}}}function o(c){return c&&function(p,m,l,b){return c.call(t,p,m,l,function(_){h(_)&&(_=null),b&&b.apply(this,arguments)})}}function s(c){return c&&function(p,m,l){try{return c.call(t,p,m,l)}catch(b){if(!h(b))throw b}}}function a(c){return c&&function(p,m,l){typeof m=="function"&&(l=m,m=null);function b(_,x){x&&(x.uid<0&&(x.uid+=4294967296),x.gid<0&&(x.gid+=4294967296)),l&&l.apply(this,arguments)}return m?c.call(t,p,m,b):c.call(t,p,b)}}function u(c){return c&&function(p,m){var l=m?c.call(t,p,m):c.call(t,p);return l&&(l.uid<0&&(l.uid+=4294967296),l.gid<0&&(l.gid+=4294967296)),l}}function h(c){if(!c||c.code==="ENOSYS")return!0;var p=!process.getuid||process.getuid()!==0;return!!(p&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Jr=v((Xu,Br)=>{var Wr=y("stream").Stream;Br.exports=oa;function oa(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);Wr.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var h=s[a];this[h]=i[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}t.open(this.path,this.flags,this.mode,function(c,p){if(c){o.emit("error",c),o.readable=!1;return}o.fd=p,o.emit("open",p),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Wr.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Hr=v((Qu,Ur)=>{"use strict";Ur.exports=aa;var sa=Object.getPrototypeOf||function(t){return t.__proto__};function aa(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:sa(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var H=v((Zu,We)=>{var O=y("fs"),ca=Rr(),ua=Jr(),la=Hr(),ge=y("util"),M,we;typeof Symbol=="function"&&typeof Symbol.for=="function"?(M=Symbol.for("graceful-fs.queue"),we=Symbol.for("graceful-fs.previous")):(M="___graceful-fs.queue",we="___graceful-fs.previous");function pa(){}function Yr(t,e){Object.defineProperty(t,M,{get:function(){return e}})}var kt=pa;ge.debuglog?kt=ge.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(kt=function(){var t=ge.format.apply(ge,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});O[M]||(Gr=global[M]||[],Yr(O,Gr),O.close=function(t){function e(r,n){return t.call(O,r,function(i){i||Vr(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,we,{value:t}),e}(O.close),O.closeSync=function(t){function e(r){t.apply(O,arguments),Vr()}return Object.defineProperty(e,we,{value:t}),e}(O.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){kt(O[M]),y("assert").equal(O[M].length,0)}));var Gr;global[M]||Yr(global,O[M]);We.exports=Me(la(O));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!O.__patched&&(We.exports=Me(O),O.__patched=!0);function Me(t){ca(t),t.gracefulify=Me,t.createReadStream=Z,t.createWriteStream=w;var e=t.readFile;t.readFile=r;function r(g,k,C){return typeof k=="function"&&(C=k,k=null),I(g,k,C);function I(L,D,j,F){return e(L,D,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Vt([I,[L,D,j],E,F||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(g,k,C,I){return typeof C=="function"&&(I=C,C=null),L(g,k,C,I);function L(D,j,F,E,A){return n(D,j,F,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Vt([L,[D,j,F,E],$,A||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var o=t.appendFile;o&&(t.appendFile=s);function s(g,k,C,I){return typeof C=="function"&&(I=C,C=null),L(g,k,C,I);function L(D,j,F,E,A){return o(D,j,F,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Vt([L,[D,j,F,E],$,A||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(g,k,C,I){return typeof C=="function"&&(I=C,C=0),L(g,k,C,I);function L(D,j,F,E,A){return a(D,j,F,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Vt([L,[D,j,F,E],$,A||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var h=t.readdir;t.readdir=p;var c=/^v[0-5]\./;function p(g,k,C){typeof k=="function"&&(C=k,k=null);var I=c.test(process.version)?function(j,F,E,A){return h(j,L(j,F,E,A))}:function(j,F,E,A){return h(j,F,L(j,F,E,A))};return I(g,k,C);function L(D,j,F,E){return function(A,$){A&&(A.code==="EMFILE"||A.code==="ENFILE")?Vt([I,[D,j,F],A,E||Date.now(),Date.now()]):($&&$.sort&&$.sort(),typeof F=="function"&&F.call(this,A,$))}}}if(process.version.substr(0,4)==="v0.8"){var m=ua(t);S=m.ReadStream,q=m.WriteStream}var l=t.ReadStream;l&&(S.prototype=Object.create(l.prototype),S.prototype.open=P);var b=t.WriteStream;b&&(q.prototype=Object.create(b.prototype),q.prototype.open=et),Object.defineProperty(t,"ReadStream",{get:function(){return S},set:function(g){S=g},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return q},set:function(g){q=g},enumerable:!0,configurable:!0});var _=S;Object.defineProperty(t,"FileReadStream",{get:function(){return _},set:function(g){_=g},enumerable:!0,configurable:!0});var x=q;Object.defineProperty(t,"FileWriteStream",{get:function(){return x},set:function(g){x=g},enumerable:!0,configurable:!0});function S(g,k){return this instanceof S?(l.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function P(){var g=this;R(g.path,g.flags,g.mode,function(k,C){k?(g.autoClose&&g.destroy(),g.emit("error",k)):(g.fd=C,g.emit("open",C),g.read())})}function q(g,k){return this instanceof q?(b.apply(this,arguments),this):q.apply(Object.create(q.prototype),arguments)}function et(){var g=this;R(g.path,g.flags,g.mode,function(k,C){k?(g.destroy(),g.emit("error",k)):(g.fd=C,g.emit("open",C))})}function Z(g,k){return new t.ReadStream(g,k)}function w(g,k){return new t.WriteStream(g,k)}var T=t.open;t.open=R;function R(g,k,C,I){return typeof C=="function"&&(I=C,C=null),L(g,k,C,I);function L(D,j,F,E,A){return T(D,j,F,function($,fu){$&&($.code==="EMFILE"||$.code==="ENFILE")?Vt([L,[D,j,F,E],$,A||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}return t}function Vt(t){kt("ENQUEUE",t[0].name,t[1]),O[M].push(t),Re()}var be;function Vr(){for(var t=Date.now(),e=0;e<O[M].length;++e)O[M][e].length>2&&(O[M][e][3]=t,O[M][e][4]=t);Re()}function Re(){if(clearTimeout(be),be=void 0,O[M].length!==0){var t=O[M].shift(),e=t[0],r=t[1],n=t[2],i=t[3],o=t[4];if(i===void 0)kt("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){kt("TIMEOUT",e.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,u=Math.max(o-i,1),h=Math.min(u*1.2,100);a>=h?(kt("RETRY",e.name,r),e.apply(null,r.concat([i]))):O[M].push(t)}be===void 0&&(be=setTimeout(Re,0))}}});var Et=v(it=>{"use strict";var Kr=U().fromCallback,W=H(),fa=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof W[t]=="function");Object.assign(it,W);fa.forEach(t=>{it[t]=Kr(W[t])});it.exists=function(t,e){return typeof e=="function"?W.exists(t,e):new Promise(r=>W.exists(t,r))};it.read=function(t,e,r,n,i,o){return typeof o=="function"?W.read(t,e,r,n,i,o):new Promise((s,a)=>{W.read(t,e,r,n,i,(u,h,c)=>{if(u)return a(u);s({bytesRead:h,buffer:c})})})};it.write=function(t,e,...r){return typeof r[r.length-1]=="function"?W.write(t,e,...r):new Promise((n,i)=>{W.write(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};it.readv=function(t,e,...r){return typeof r[r.length-1]=="function"?W.readv(t,e,...r):new Promise((n,i)=>{W.readv(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesRead:s,buffers:a})})})};it.writev=function(t,e,...r){return typeof r[r.length-1]=="function"?W.writev(t,e,...r):new Promise((n,i)=>{W.writev(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffers:a})})})};typeof W.realpath.native=="function"?it.realpath.native=Kr(W.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Xr=v((el,zr)=>{"use strict";var ma=y("path");zr.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(ma.parse(e).root,""))){let n=new Error(`Path contains invalid characters: ${e}`);throw n.code="EINVAL",n}}});var en=v((rl,Be)=>{"use strict";var Qr=Et(),{checkPath:Zr}=Xr(),tn=t=>{let e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};Be.exports.makeDir=async(t,e)=>(Zr(t),Qr.mkdir(t,{mode:tn(e),recursive:!0}));Be.exports.makeDirSync=(t,e)=>(Zr(t),Qr.mkdirSync(t,{mode:tn(e),recursive:!0}))});var X=v((nl,rn)=>{"use strict";var da=U().fromPromise,{makeDir:ya,makeDirSync:Je}=en(),Ue=da(ya);rn.exports={mkdirs:Ue,mkdirsSync:Je,mkdirp:Ue,mkdirpSync:Je,ensureDir:Ue,ensureDirSync:Je}});var pt=v((il,on)=>{"use strict";var ha=U().fromPromise,nn=Et();function ga(t){return nn.access(t).then(()=>!0).catch(()=>!1)}on.exports={pathExists:ha(ga),pathExistsSync:nn.existsSync}});var He=v((ol,sn)=>{"use strict";var Yt=H();function ba(t,e,r,n){Yt.open(t,"r+",(i,o)=>{if(i)return n(i);Yt.futimes(o,e,r,s=>{Yt.close(o,a=>{n&&n(s||a)})})})}function wa(t,e,r){let n=Yt.openSync(t,"r+");return Yt.futimesSync(n,e,r),Yt.closeSync(n)}sn.exports={utimesMillis:ba,utimesMillisSync:wa}});var $t=v((sl,un)=>{"use strict";var Kt=Et(),N=y("path"),va=y("util");function xa(t,e,r){let n=r.dereference?i=>Kt.stat(i,{bigint:!0}):i=>Kt.lstat(i,{bigint:!0});return Promise.all([n(t),n(e).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function Sa(t,e,r){let n,i=r.dereference?s=>Kt.statSync(s,{bigint:!0}):s=>Kt.lstatSync(s,{bigint:!0}),o=i(t);try{n=i(e)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}function Ca(t,e,r,n,i){va.callbackify(xa)(t,e,n,(o,s)=>{if(o)return i(o);let{srcStat:a,destStat:u}=s;if(u){if(re(a,u)){let h=N.basename(t),c=N.basename(e);return r==="move"&&h!==c&&h.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:u,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!u.isDirectory())return i(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!a.isDirectory()&&u.isDirectory())return i(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return a.isDirectory()&&Ge(t,e)?i(new Error(ve(t,e,r))):i(null,{srcStat:a,destStat:u})})}function _a(t,e,r,n){let{srcStat:i,destStat:o}=Sa(t,e,n);if(o){if(re(i,o)){let s=N.basename(t),a=N.basename(e);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&Ge(t,e))throw new Error(ve(t,e,r));return{srcStat:i,destStat:o}}function an(t,e,r,n,i){let o=N.resolve(N.dirname(t)),s=N.resolve(N.dirname(r));if(s===o||s===N.parse(s).root)return i();Kt.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):re(e,u)?i(new Error(ve(t,r,n))):an(t,e,s,n,i))}function cn(t,e,r,n){let i=N.resolve(N.dirname(t)),o=N.resolve(N.dirname(r));if(o===i||o===N.parse(o).root)return;let s;try{s=Kt.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(re(e,s))throw new Error(ve(t,r,n));return cn(t,e,o,n)}function re(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Ge(t,e){let r=N.resolve(t).split(N.sep).filter(i=>i),n=N.resolve(e).split(N.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function ve(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}un.exports={checkPaths:Ca,checkPathsSync:_a,checkParentPaths:an,checkParentPathsSync:cn,isSrcSubdir:Ge,areIdentical:re}});var yn=v((al,dn)=>{"use strict";var G=H(),ne=y("path"),ka=X().mkdirs,Ea=pt().pathExists,$a=He().utimesMillis,ie=$t();function ja(t,e,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),ie.checkPaths(t,e,"copy",r,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;ie.checkParentPaths(t,s,e,"copy",u=>{if(u)return n(u);pn(t,e,r,(h,c)=>{if(h)return n(h);if(!c)return n();Oa(a,t,e,r,n)})})})}function Oa(t,e,r,n,i){let o=ne.dirname(r);Ea(o,(s,a)=>{if(s)return i(s);if(a)return Ve(t,e,r,n,i);ka(o,u=>u?i(u):Ve(t,e,r,n,i))})}function pn(t,e,r,n){if(!r.filter)return n(null,!0);Promise.resolve(r.filter(t,e)).then(i=>n(null,i),i=>n(i))}function Ve(t,e,r,n,i){(n.dereference?G.stat:G.lstat)(e,(s,a)=>s?i(s):a.isDirectory()?Ia(a,t,e,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?Fa(a,t,e,r,n,i):a.isSymbolicLink()?Ma(t,e,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${e}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${e}`)):i(new Error(`Unknown file: ${e}`)))}function Fa(t,e,r,n,i,o){return e?Pa(t,r,n,i,o):fn(t,r,n,i,o)}function Pa(t,e,r,n,i){if(n.overwrite)G.unlink(r,o=>o?i(o):fn(t,e,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function fn(t,e,r,n,i){G.copyFile(e,r,o=>o?i(o):n.preserveTimestamps?qa(t.mode,e,r,i):xe(r,t.mode,i))}function qa(t,e,r,n){return Ta(t)?Da(r,t,i=>i?n(i):ln(t,e,r,n)):ln(t,e,r,n)}function Ta(t){return(t&128)===0}function Da(t,e,r){return xe(t,e|128,r)}function ln(t,e,r,n){Na(e,r,i=>i?n(i):xe(r,t,n))}function xe(t,e,r){return G.chmod(t,e,r)}function Na(t,e,r){G.stat(t,(n,i)=>n?r(n):$a(e,i.atime,i.mtime,r))}function Ia(t,e,r,n,i,o){return e?mn(r,n,i,o):La(t.mode,r,n,i,o)}function La(t,e,r,n,i){G.mkdir(r,o=>{if(o)return i(o);mn(e,r,n,s=>s?i(s):xe(r,t,i))})}function mn(t,e,r,n){G.readdir(t,(i,o)=>i?n(i):Ye(o,t,e,r,n))}function Ye(t,e,r,n,i){let o=t.pop();return o?Aa(t,o,e,r,n,i):i()}function Aa(t,e,r,n,i,o){let s=ne.join(r,e),a=ne.join(n,e);pn(s,a,i,(u,h)=>{if(u)return o(u);if(!h)return Ye(t,r,n,i,o);ie.checkPaths(s,a,"copy",i,(c,p)=>{if(c)return o(c);let{destStat:m}=p;Ve(m,s,a,i,l=>l?o(l):Ye(t,r,n,i,o))})})}function Ma(t,e,r,n,i){G.readlink(e,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=ne.resolve(process.cwd(),s)),t)G.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?G.symlink(s,r,i):i(a):(n.dereference&&(u=ne.resolve(process.cwd(),u)),ie.isSrcSubdir(s,u)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`)):ie.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite '${u}' with '${s}'.`)):Ra(s,r,i)));else return G.symlink(s,r,i)})}function Ra(t,e,r){G.unlink(e,n=>n?r(n):G.symlink(t,e,r))}dn.exports=ja});var vn=v((cl,wn)=>{"use strict";var B=H(),oe=y("path"),Wa=X().mkdirsSync,Ba=He().utimesMillisSync,se=$t();function Ja(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=se.checkPathsSync(t,e,"copy",r);if(se.checkParentPathsSync(t,n,e,"copy"),r.filter&&!r.filter(t,e))return;let o=oe.dirname(e);return B.existsSync(o)||Wa(o),hn(i,t,e,r)}function hn(t,e,r,n){let o=(n.dereference?B.statSync:B.lstatSync)(e);if(o.isDirectory())return za(o,t,e,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Ua(o,t,e,r,n);if(o.isSymbolicLink())return Za(t,e,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${e}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function Ua(t,e,r,n,i){return e?Ha(t,r,n,i):gn(t,r,n,i)}function Ha(t,e,r,n){if(n.overwrite)return B.unlinkSync(r),gn(t,e,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function gn(t,e,r,n){return B.copyFileSync(e,r),n.preserveTimestamps&&Ga(t.mode,e,r),Ke(r,t.mode)}function Ga(t,e,r){return Va(t)&&Ya(r,t),Ka(e,r)}function Va(t){return(t&128)===0}function Ya(t,e){return Ke(t,e|128)}function Ke(t,e){return B.chmodSync(t,e)}function Ka(t,e){let r=B.statSync(t);return Ba(e,r.atime,r.mtime)}function za(t,e,r,n,i){return e?bn(r,n,i):Xa(t.mode,r,n,i)}function Xa(t,e,r,n){return B.mkdirSync(r),bn(e,r,n),Ke(r,t)}function bn(t,e,r){B.readdirSync(t).forEach(n=>Qa(n,t,e,r))}function Qa(t,e,r,n){let i=oe.join(e,t),o=oe.join(r,t);if(n.filter&&!n.filter(i,o))return;let{destStat:s}=se.checkPathsSync(i,o,"copy",n);return hn(s,i,o,n)}function Za(t,e,r,n){let i=B.readlinkSync(e);if(n.dereference&&(i=oe.resolve(process.cwd(),i)),t){let o;try{o=B.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return B.symlinkSync(i,r);throw s}if(n.dereference&&(o=oe.resolve(process.cwd(),o)),se.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(se.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return tc(i,r)}else return B.symlinkSync(i,r)}function tc(t,e){return B.unlinkSync(e),B.symlinkSync(t,e)}wn.exports=Ja});var Se=v((ul,xn)=>{"use strict";var ec=U().fromCallback;xn.exports={copy:ec(yn()),copySync:vn()}});var ae=v((ll,Cn)=>{"use strict";var Sn=H(),rc=U().fromCallback;function nc(t,e){Sn.rm(t,{recursive:!0,force:!0},e)}function ic(t){Sn.rmSync(t,{recursive:!0,force:!0})}Cn.exports={remove:rc(nc),removeSync:ic}});var Pn=v((pl,Fn)=>{"use strict";var oc=U().fromPromise,En=Et(),$n=y("path"),jn=X(),On=ae(),_n=oc(async function(e){let r;try{r=await En.readdir(e)}catch{return jn.mkdirs(e)}return Promise.all(r.map(n=>On.remove($n.join(e,n))))});function kn(t){let e;try{e=En.readdirSync(t)}catch{return jn.mkdirsSync(t)}e.forEach(r=>{r=$n.join(t,r),On.removeSync(r)})}Fn.exports={emptyDirSync:kn,emptydirSync:kn,emptyDir:_n,emptydir:_n}});var Nn=v((fl,Dn)=>{"use strict";var sc=U().fromCallback,qn=y("path"),ft=H(),Tn=X();function ac(t,e){function r(){ft.writeFile(t,"",n=>{if(n)return e(n);e()})}ft.stat(t,(n,i)=>{if(!n&&i.isFile())return e();let o=qn.dirname(t);ft.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?Tn.mkdirs(o,u=>{if(u)return e(u);r()}):e(s);a.isDirectory()?r():ft.readdir(o,u=>{if(u)return e(u)})})})}function cc(t){let e;try{e=ft.statSync(t)}catch{}if(e&&e.isFile())return;let r=qn.dirname(t);try{ft.statSync(r).isDirectory()||ft.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Tn.mkdirsSync(r);else throw n}ft.writeFileSync(t,"")}Dn.exports={createFile:sc(ac),createFileSync:cc}});var Rn=v((ml,Mn)=>{"use strict";var uc=U().fromCallback,In=y("path"),mt=H(),Ln=X(),lc=pt().pathExists,{areIdentical:An}=$t();function pc(t,e,r){function n(i,o){mt.link(i,o,s=>{if(s)return r(s);r(null)})}mt.lstat(e,(i,o)=>{mt.lstat(t,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(o&&An(a,o))return r(null);let u=In.dirname(e);lc(u,(h,c)=>{if(h)return r(h);if(c)return n(t,e);Ln.mkdirs(u,p=>{if(p)return r(p);n(t,e)})})})})}function fc(t,e){let r;try{r=mt.lstatSync(e)}catch{}try{let o=mt.lstatSync(t);if(r&&An(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=In.dirname(e);return mt.existsSync(n)||Ln.mkdirsSync(n),mt.linkSync(t,e)}Mn.exports={createLink:uc(pc),createLinkSync:fc}});var Bn=v((dl,Wn)=>{"use strict";var dt=y("path"),ce=H(),mc=pt().pathExists;function dc(t,e,r){if(dt.isAbsolute(t))return ce.lstat(t,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:t,toDst:t}));{let n=dt.dirname(e),i=dt.join(n,t);return mc(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:t}):ce.lstat(t,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:t,toDst:dt.relative(n,t)})))}}function yc(t,e){let r;if(dt.isAbsolute(t)){if(r=ce.existsSync(t),!r)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}else{let n=dt.dirname(e),i=dt.join(n,t);if(r=ce.existsSync(i),r)return{toCwd:i,toDst:t};if(r=ce.existsSync(t),!r)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:dt.relative(n,t)}}}Wn.exports={symlinkPaths:dc,symlinkPathsSync:yc}});var Hn=v((yl,Un)=>{"use strict";var Jn=H();function hc(t,e,r){if(r=typeof e=="function"?e:r,e=typeof e=="function"?!1:e,e)return r(null,e);Jn.lstat(t,(n,i)=>{if(n)return r(null,"file");e=i&&i.isDirectory()?"dir":"file",r(null,e)})}function gc(t,e){let r;if(e)return e;try{r=Jn.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Un.exports={symlinkType:hc,symlinkTypeSync:gc}});var Zn=v((hl,Qn)=>{"use strict";var bc=U().fromCallback,Vn=y("path"),Q=Et(),Yn=X(),wc=Yn.mkdirs,vc=Yn.mkdirsSync,Kn=Bn(),xc=Kn.symlinkPaths,Sc=Kn.symlinkPathsSync,zn=Hn(),Cc=zn.symlinkType,_c=zn.symlinkTypeSync,kc=pt().pathExists,{areIdentical:Xn}=$t();function Ec(t,e,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,Q.lstat(e,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Q.stat(t),Q.stat(e)]).then(([s,a])=>{if(Xn(s,a))return n(null);Gn(t,e,r,n)}):Gn(t,e,r,n)})}function Gn(t,e,r,n){xc(t,e,(i,o)=>{if(i)return n(i);t=o.toDst,Cc(o.toCwd,r,(s,a)=>{if(s)return n(s);let u=Vn.dirname(e);kc(u,(h,c)=>{if(h)return n(h);if(c)return Q.symlink(t,e,a,n);wc(u,p=>{if(p)return n(p);Q.symlink(t,e,a,n)})})})})}function $c(t,e,r){let n;try{n=Q.lstatSync(e)}catch{}if(n&&n.isSymbolicLink()){let a=Q.statSync(t),u=Q.statSync(e);if(Xn(a,u))return}let i=Sc(t,e);t=i.toDst,r=_c(i.toCwd,r);let o=Vn.dirname(e);return Q.existsSync(o)||vc(o),Q.symlinkSync(t,e,r)}Qn.exports={createSymlink:bc(Ec),createSymlinkSync:$c}});var ai=v((gl,si)=>{"use strict";var{createFile:ti,createFileSync:ei}=Nn(),{createLink:ri,createLinkSync:ni}=Rn(),{createSymlink:ii,createSymlinkSync:oi}=Zn();si.exports={createFile:ti,createFileSync:ei,ensureFile:ti,ensureFileSync:ei,createLink:ri,createLinkSync:ni,ensureLink:ri,ensureLinkSync:ni,createSymlink:ii,createSymlinkSync:oi,ensureSymlink:ii,ensureSymlinkSync:oi}});var Ce=v((bl,ci)=>{function jc(t,{EOL:e=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?e:"";return JSON.stringify(t,n,i).replace(/\n/g,e)+o}function Oc(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}ci.exports={stringify:jc,stripBom:Oc}});var fi=v((wl,pi)=>{var zt;try{zt=H()}catch{zt=y("fs")}var _e=U(),{stringify:ui,stripBom:li}=Ce();async function Fc(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||zt,n="throws"in e?e.throws:!0,i=await _e.fromCallback(r.readFile)(t,e);i=li(i);let o;try{o=JSON.parse(i,e?e.reviver:null)}catch(s){if(n)throw s.message=`${t}: ${s.message}`,s;return null}return o}var Pc=_e.fromPromise(Fc);function qc(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||zt,n="throws"in e?e.throws:!0;try{let i=r.readFileSync(t,e);return i=li(i),JSON.parse(i,e.reviver)}catch(i){if(n)throw i.message=`${t}: ${i.message}`,i;return null}}async function Tc(t,e,r={}){let n=r.fs||zt,i=ui(e,r);await _e.fromCallback(n.writeFile)(t,i,r)}var Dc=_e.fromPromise(Tc);function Nc(t,e,r={}){let n=r.fs||zt,i=ui(e,r);return n.writeFileSync(t,i,r)}var Ic={readFile:Pc,readFileSync:qc,writeFile:Dc,writeFileSync:Nc};pi.exports=Ic});var di=v((vl,mi)=>{"use strict";var ke=fi();mi.exports={readJson:ke.readFile,readJsonSync:ke.readFileSync,writeJson:ke.writeFile,writeJsonSync:ke.writeFileSync}});var Ee=v((xl,gi)=>{"use strict";var Lc=U().fromCallback,ue=H(),yi=y("path"),hi=X(),Ac=pt().pathExists;function Mc(t,e,r,n){typeof r=="function"&&(n=r,r="utf8");let i=yi.dirname(t);Ac(i,(o,s)=>{if(o)return n(o);if(s)return ue.writeFile(t,e,r,n);hi.mkdirs(i,a=>{if(a)return n(a);ue.writeFile(t,e,r,n)})})}function Rc(t,...e){let r=yi.dirname(t);if(ue.existsSync(r))return ue.writeFileSync(t,...e);hi.mkdirsSync(r),ue.writeFileSync(t,...e)}gi.exports={outputFile:Lc(Mc),outputFileSync:Rc}});var wi=v((Sl,bi)=>{"use strict";var{stringify:Wc}=Ce(),{outputFile:Bc}=Ee();async function Jc(t,e,r={}){let n=Wc(e,r);await Bc(t,n,r)}bi.exports=Jc});var xi=v((Cl,vi)=>{"use strict";var{stringify:Uc}=Ce(),{outputFileSync:Hc}=Ee();function Gc(t,e,r){let n=Uc(e,r);Hc(t,n,r)}vi.exports=Gc});var Ci=v((_l,Si)=>{"use strict";var Vc=U().fromPromise,J=di();J.outputJson=Vc(wi());J.outputJsonSync=xi();J.outputJSON=J.outputJson;J.outputJSONSync=J.outputJsonSync;J.writeJSON=J.writeJson;J.writeJSONSync=J.writeJsonSync;J.readJSON=J.readJson;J.readJSONSync=J.readJsonSync;Si.exports=J});var ji=v((kl,$i)=>{"use strict";var Yc=H(),Xe=y("path"),Kc=Se().copy,Ei=ae().remove,zc=X().mkdirp,Xc=pt().pathExists,_i=$t();function Qc(t,e,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;_i.checkPaths(t,e,"move",r,(o,s)=>{if(o)return n(o);let{srcStat:a,isChangingCase:u=!1}=s;_i.checkParentPaths(t,a,e,"move",h=>{if(h)return n(h);if(Zc(e))return ki(t,e,i,u,n);zc(Xe.dirname(e),c=>c?n(c):ki(t,e,i,u,n))})})}function Zc(t){let e=Xe.dirname(t);return Xe.parse(e).root===e}function ki(t,e,r,n,i){if(n)return ze(t,e,r,i);if(r)return Ei(e,o=>o?i(o):ze(t,e,r,i));Xc(e,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):ze(t,e,r,i))}function ze(t,e,r,n){Yc.rename(t,e,i=>i?i.code!=="EXDEV"?n(i):tu(t,e,r,n):n())}function tu(t,e,r,n){Kc(t,e,{overwrite:r,errorOnExist:!0},o=>o?n(o):Ei(t,n))}$i.exports=Qc});var Ti=v((El,qi)=>{"use strict";var Fi=H(),Ze=y("path"),eu=Se().copySync,Pi=ae().removeSync,ru=X().mkdirpSync,Oi=$t();function nu(t,e,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Oi.checkPathsSync(t,e,"move",r);return Oi.checkParentPathsSync(t,i,e,"move"),iu(e)||ru(Ze.dirname(e)),ou(t,e,n,o)}function iu(t){let e=Ze.dirname(t);return Ze.parse(e).root===e}function ou(t,e,r,n){if(n)return Qe(t,e,r);if(r)return Pi(e),Qe(t,e,r);if(Fi.existsSync(e))throw new Error("dest already exists.");return Qe(t,e,r)}function Qe(t,e,r){try{Fi.renameSync(t,e)}catch(n){if(n.code!=="EXDEV")throw n;return su(t,e,r)}}function su(t,e,r){return eu(t,e,{overwrite:r,errorOnExist:!0}),Pi(t)}qi.exports=nu});var Ni=v(($l,Di)=>{"use strict";var au=U().fromCallback;Di.exports={move:au(ji()),moveSync:Ti()}});var jt=v((jl,Ii)=>{"use strict";Ii.exports={...Et(),...Se(),...Pn(),...ai(),...Ci(),...X(),...Ni(),...Ee(),...pt(),...ae()}});var pu={};oo(pu,{default:()=>lu});var Fr=y("@yarnpkg/cli"),Ht=y("@yarnpkg/core"),De=y("@yarnpkg/shell"),ut=yt(Or());var f=class extends Fr.BaseCommand{async getManifest(){return await Ht.Manifest.tryFind(this.context.cwd)}async getConfiguration(){return await Ht.Configuration.find(this.context.cwd,this.context.plugins)}async getProject(){let r=await this.getConfiguration(),{project:n}=await Ht.Project.find(r,this.context.cwd);return n}withPassthrough(r){return this.passthrough.length?this.passthrough.reduce((n,i)=>i?`${n} ${i}`:`${n}`,r):r}log(r){var i;let n=(i=this.name)!=null?i:"@bud";process.stdout.write(`[${n}] ${r}
`)}err(r){var i;let n=(i=this.name)!=null?i:"@bud";throw Error(`[${n}] ${typeof r=="string"?r:r.message}
`)}async $(...r){let n=await this.getProject();await Promise.all(r.map(async i=>{if(!i)return;this.log(i);let o=await(0,De.execute)(i,[],{cwd:n.cwd});if(o!==0)throw new Error(`${i} failed with code ${o}`)}))}async tryExecuting(r,n,i={}){try{let o=await(0,De.execute)(r,n,i);if(o!==0)throw new Error(`\u274C ${r} ${n.join(" ")} failed`);return o}catch(o){this.context.stderr.write(o.message)}}};ct([ut.bind],f.prototype,"getManifest",1),ct([ut.bind],f.prototype,"getConfiguration",1),ct([ut.bind],f.prototype,"getProject",1),ct([ut.bind],f.prototype,"withPassthrough",1),ct([ut.bind],f.prototype,"log",1),ct([ut.bind],f.prototype,"err",1),ct([ut.bind],f.prototype,"$",1);var Gt=class extends f{async execute(){process.stdout.write(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),Object.values(ye).filter(e=>e.usage).forEach(e=>{var r;(r=e.usage.examples)==null||r.forEach(([n,i])=>{process.stdout.write(`
\x1B[34m${i}\x1B[0m  ${n}
`)})})}};Gt.label="@bud",Gt.paths=[["@bud"]];var bt=class extends f{async execute(){await this.$("yarn @bud clean"),await this.$("yarn install"),await this.$("yarn @bud build"),await this.$("yarn @bud lint dependencies","yarn @bud lint format --no-fix","yarn @bud lint exports","yarn @bud test unit"),await this.$("yarn @bud registry start"),await this.$("yarn @bud release --tag latest"),await this.$("yarn @bud test integration"),await this.$("yarn @bud test e2e")}async err(e){this.log(e.message)}};bt.label="@bud ci",bt.paths=[["@bud","ci"]],bt.usage={category:"@bud",description:"Emulate CI workflow",examples:[["Emulate CI workflow","yarn @bud ci"]]};var Dr=y("module"),rt=y("path"),Nr=y("url"),nt={},K=((nt==null?void 0:nt.url)&&typeof nt.url<"u"?(0,Nr.fileURLToPath)(nt.url):__dirname).split("sources/").shift(),$u=(0,rt.join)(K,"package.json"),ju=(0,rt.join)(K,"storage"),Ou=(0,rt.join)(K,"config","tsconfig.json");var d={root:K,config:(0,rt.join)(K,"config"),sources:(0,rt.join)(K,"sources"),tests:(0,rt.join)(K,"tests"),storage:(0,rt.join)(K,"storage"),mocks:(0,rt.join)(K,"storage","mocks")},Tr;typeof(nt==null?void 0:nt.url)<"u"?Tr=(0,Dr.createRequire)(nt.url)("../../../config/monorepo.config.cjs"):Tr=qr();var z=y("path");var wt=class extends f{err(e){this.log(e)}async execute(){await this.$("rm -rf **/.budfiles",`rm -rf ${(0,z.join)(d.root,"node_modules")}`,`rm -rf ${(0,z.join)(d.sources,"@roots/*/lib")}`,`rm -rf ${(0,z.join)(d.sources,"@roots/*/node_modules")}`,`rm -rf ${(0,z.join)(d.sources,"@roots/*/types")}`,`rm -rf ${(0,z.join)(d.sources,"**/.tsbuildinfo")}`,`rm -rf ${(0,z.join)(d.storage,"packages")}`,`rm -rf ${(0,z.join)(d.storage,"mocks")}`,`rm -rf ${(0,z.join)(d.storage,"node_modules")}`,`rm -rf ${(0,z.join)(d.storage,"yarn")}`,`rm -rf ${(0,z.join)(d.storage,".verdaccio-db.json")}`)}};wt.label="@bud clean",wt.paths=[["@bud","clean"]],wt.usage={category:"@bud",description:"clean project artifacts",examples:[["clean project artifacts","yarn @bud clean"]]};var Lr=y("clipanion"),Ne=y("path");var ta=(0,Ne.join)(d.config,"tsconfig.json"),ea=(0,Ne.join)(d.sources,"@repo/compile-kit/src/cjs"),vt=class extends f{constructor(){super(...arguments);this.package=Lr.Option.String("package to transpile","all")}async execute(){await this.$(`yarn ts-node --project ${ta} ${ea} ${this.package}`)}};vt.label="@bud compile",vt.paths=[["@bud","compile"]],vt.usage={category:"@bud",description:"compile a package",details:"compiles package with vercel/ncc",examples:[["compile {package name}","yarn @bud compile @roots/bud-react"]]};var Mu=`${K}/sources/@repo/compile-kit/src/cjs @roots/bud-support`,xt=class extends f{async execute(){await this.$("yarn @bud tsc --force");try{await this.$("yarn @bud tsc --watch","yarn @bud test unit","yarn @bud docs dev")}catch(e){this.context.stderr.write(e)}}};xt.label="@bud dev",xt.paths=[["@bud","dev"]],xt.usage={category:"@bud",description:"develop project code",examples:[["run tsc, docusaurus & vitest in watch mode","yarn @bud dev"]]};var St=class extends f{async execute(){await this.$("yarn workspace @repo/docs docusaurus start")}};St.label="@bud docs dev",St.paths=[["@bud","docs","dev"]],St.usage={category:"@bud",description:"develop docs",examples:[["develop docs","yarn @bud docs dev"]]};var Ie=y("clipanion");var Ct=class extends f{constructor(){super(...arguments);this.site=Ie.Option.Boolean("-s,--site",!1,{description:"build site files"});this.readme=Ie.Option.Boolean("-r,--readme",!1,{description:"build readme files"})}async execute(){let r=!this.site&&!this.readme;if(await this.$("yarn workspace @repo/markdown-kit build"),r||this.site){await this.$(`yarn node ${d.sources}/@repo/markdown-kit/compiled/cli-examples/index.js`);try{await this.$(`yarn node ${d.sources}/@repo/markdown-kit/compiled/releases/index.js`)}catch{}await this.$("yarn workspace @repo/docs run build")}(r||this.readme)&&await this.$(`yarn node ${d.sources}/@repo/markdown-kit/compiled/readme/index.js`)}};Ct.label="@bud docs",Ct.paths=[["@bud","docs"]],Ct.usage={category:"@bud",description:"build docs and readme.",examples:[["build all","yarn @bud docs"],["build api documentation and site files","yarn @bud docs --site"],["build readme files","yarn @bud docs --readme"]]};var Ar=y("clipanion");var _t=class extends f{constructor(){super(...arguments);this.passthrough=Ar.Option.Proxy({name:"netlify options"})}async execute(){await this.$(this.withPassthrough("yarn workspace @repo/docs netlify"))}};_t.label="@bud netlify",_t.paths=[["@bud","netlify"],["@bud","docs","netlify"]],_t.usage={category:"@bud",description:"netlify alias",examples:[["run commands on netlify-cli","yarn @bud netlify"]]};var V=y("child_process"),tr=yt(jt());var Xt=class extends f{get hasPm2(){try{return(0,V.execSync)("yarn @bud pm2 --version"),!0}catch{return!1}}get hasVolta(){try{return(0,V.execSync)("volta -v"),!0}catch{return!1}}get voltaList(){return(0,V.execSync)("volta list").toString().trim().split(`
`).filter(e=>e.startsWith("runtime")||e.startsWith("package-manager")).map(e=>"- ".concat(e.split(" / ").shift().split(" (current").shift().replace("runtime ",""))).join(`
`)}get hasVerdaccio(){try{return(0,V.execSync)("yarn @bud pm2 verdaccio --version"),!0}catch{return!1}}get head(){return(0,V.execSync)("git rev-parse HEAD").toString().trim()}get branch(){return(0,V.execSync)("git rev-parse --abbrev-ref HEAD").toString().trim()}get pm2(){return(0,V.execSync)("yarn @bud pm2 ls").toString().trim()}get verdaccio(){return(0,V.execSync)("yarn @bud pm2 verdaccio --version").toString().trim()}get logs(){return(0,V.execSync)("yarn @bud pm2 logs --out --lines 5 --nostream").toString().trim().split(`
`).splice(2).join(`
`)}get requiredNode(){return(0,tr.readJsonSync)(`${d.root}/package.json`).volta.node}get requiredNpm(){return(0,tr.readJsonSync)(`${d.root}/package.json`).volta.npm}get pm2Version(){return(0,V.execSync)("yarn @bud pm2 --version").toString().trim().replace("v","")}get nodeVersion(){return process.version.replace("v","")}get yarn(){return(0,V.execSync)("yarn -v").toString().trim().replace("v","")}get npm(){return(0,V.execSync)("npm -v").toString().trim().replace("v","")}get gitLog(){return(0,V.execSync)(`git log --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' origin..${this.branch}`).toString().trim()}async execute(){this.log(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),this.hasVolta?process.stdout.write(`
${this.voltaList}
`):process.stdout.write(`
- node@${this.nodeVersion} (required: ${this.requiredNode})
- yarn@${this.yarn} 
- npm@${this.npm} (required: ${this.requiredNpm})
`),this.nodeVersion!==this.requiredNode&&process.stdout.write(`
\x1B[31m\u2718\x1B[0m node version mismatch

Your node version is ${process.version} but ${this.requiredNode} is required.
Consider using volta to guarantee you are using the correct version of node.`),this.npm!==this.requiredNpm&&process.stdout.write(`
\x1B[31m\u2718\x1B[0m npm version mismatch

Your npm version is ${this.npm} but ${this.requiredNode} is required.`),process.stdout.write(`
On branch \`${this.branch}\`:

${this.gitLog}
`),this.hasPm2&&this.hasVerdaccio&&process.stdout.write(`
${this.pm2}
${this.logs}`),this.context.stdout.write(`

`)}};Xt.label="@bud info",Xt.paths=[["@bud","info"]];var Ot=class extends f{async execute(){await this.$("yarn syncpack list-mismatches --config ./config/syncpack.config.cjs")}};Ot.label="@bud lint dependencies",Ot.paths=[["@bud","lint","dependencies"]],Ot.usage={category:"@bud",description:"ensure packages are synced",examples:[["lint dependency versions","yarn @bud lint dependencies"]]};var Ft=class extends f{async execute(){await this.$("yarn workspaces foreach --no-private exec yarn run package-check")}};Ft.label="@bud lint exports",Ft.paths=[["@bud","lint","exports"]],Ft.usage={category:"@bud",description:"lint published package module exports",examples:[["lint package.json module exports","yarn @bud lint exports"]]};var Li=y("clipanion");var Pt=class extends f{constructor(){super(...arguments);this.fix=Li.Option.Boolean("-f,--fix",!0,{description:"fix"})}async execute(){await this.$(`yarn prettier ./sources/@roots/*/src/**/* ${this.fix?"--write":"--check"} --config ./config/prettier.config.cjs --ignore-unknown --no-error-on-unmatched-pattern`)}};Pt.label="@bud lint format",Pt.paths=[["@bud","format"]],Pt.usage={category:"@bud",description:"Run coding style linters",examples:[["run prettier","yarn @bud format"],["run prettier (no fix)","yarn @bud format --no-fix"]]};var Ai=y("clipanion");var qt=class extends f{constructor(){super(...arguments);this.passthrough=Ai.Option.Proxy({name:"eslint options"})}async execute(){await this.$(this.withPassthrough('yarn eslint  "./sources/*/*/src/**/*.{ts,tsx,js,jsx}"  "./sources/*/*/sources/**/*.{ts,tsx,js,jsx}"  "./tests/**/*.{ts,tsx,js,jsx}"  "./config/**/*.{ts,tsx,js,jsx}"  --config ./config/eslint.config.cjs  --no-error-on-unmatched-pattern'))}};qt.label="@bud lint",qt.paths=[["@bud","lint"]],qt.usage={category:"@bud",description:"run eslint",examples:[["run eslint","yarn @bud lint"]]};var tt=yt(jt()),le=y("path");var Tt=class extends f{async execute(){if(await(0,tt.ensureDir)((0,le.join)(d.root,"storage","packages")),await(0,tt.remove)((0,le.join)(d.root,"storage","packages")),await(0,tt.pathExists)((0,le.join)(d.root,"storage",".verdaccio-db.json"))){let r=await(0,tt.readJson)((0,le.join)(d.root,"storage",".verdaccio-db.json"));r.list=[],await(0,tt.writeJson)(`${d.root}/storage/.verdaccio-db.json`,r)}}};Tt.label="@bud registry clean",Tt.paths=[["@bud","registry","clean"]],Tt.usage={category:"@bud",description:"clean previously published packages",examples:[["clean previously published packages","yarn @bud registry clean"]]};var Dt=class extends f{async execute(){await this.tryExecuting("npm",["install","pm2","verdaccio"],{cwd:`${d.root}/storage`})}};Dt.label="@bud registry install",Dt.paths=[["@bud","registry","install"]],Dt.usage={category:"@bud",description:"install pm2 & verdaccio",examples:[["install pm2 and verdaccio","yarn @bud registry install"]]};var Mi=y("clipanion"),Ri=yt(jt());var Nt=class extends f{constructor(){super(...arguments);this.passthrough=Mi.Option.Proxy({name:"pm2 options"})}async execute(){var n;await(0,Ri.realpath)(`${d.root}/storage/node_modules/pm2/bin/pm2`)||await this.tryExecuting("yarn",["@bud","registry","install"]),await this.tryExecuting("node",[`${d.root}/storage/node_modules/pm2/bin/pm2`,...(n=this.passthrough)!=null?n:[]].filter(Boolean))}};Nt.label="@bud pm2",Nt.paths=[["@bud","pm2"]],Nt.usage={category:"@bud",description:"registry access",examples:[["work with pm2","yarn @bud pm2"]]};var Wi=yt(jt());var It=class extends f{async execute(){await(0,Wi.realpath)(`${d.root}/storage/node_modules/pm2/bin/pm2`)||await this.tryExecuting("yarn",["@bud","registry","install"]),await this.tryExecuting("yarn",["@bud","pm2","start",`${d.root}/storage/node_modules/.bin/verdaccio`,"--",`--config=${d.root}/config/verdaccio/config.yaml`]),await this.tryExecuting("yarn",["config","set","npmPublishRegistry","http://localhost:4873"]),await this.tryExecuting("yarn",["config","set","npmRegistryServer","http://localhost:4873"])}};It.label="@bud registry start",It.paths=[["@bud","registry","start"]],It.usage={category:"@bud",description:"start verdaccio registry",examples:[["start verdaccio server","yarn @bud registry start"]]};var er=y("@yarnpkg/shell"),Bi=yt(jt());var Lt=class extends f{async execute(){try{if(!await(0,Bi.realpath)(`${d.root}/storage/node_modules/pm2/bin/pm2`))return;await this.tryExecuting("yarn",["@bud","pm2","stop","verdaccio"]),await this.tryExecuting("yarn",["@bud","pm2","delete","verdaccio"])}catch{}try{await(0,er.execute)("yarn",["config","set","npmPublishRegistry","https://registry.npmjs.org"]),await(0,er.execute)("yarn",["config","set","npmRegistryServer","https://registry.npmjs.org"])}catch{}}};Lt.label="@bud registry stop",Lt.paths=[["@bud","registry","stop"]],Lt.usage={category:"@bud",description:"stop verdaccio registry",examples:[["stop verdaccio server","yarn @bud registry stop"]]};var $e=y("clipanion");var At=class extends f{constructor(){super(...arguments);this.version=$e.Option.String("-v,--version",null,{description:"version"});this.tag=$e.Option.String("-t,--tag",null,{description:"tag"});this._registry=$e.Option.String("-r,--registry",null,{description:"Registry to publish to. Defaults to npm in CI."})}get registry(){var r;return(r=this._registry)!=null?r:"https://registry.npmjs.org/"}async execute(){var r;if(await this.$("yarn install --immutable"),this.tag==="nightly"){let n=new Date,i=`${n.getUTCFullYear()}.${n.getUTCMonth()+1}.${n.getUTCDate()}`;try{await this.$(`npm show @roots/bud@${i} --tag nightly --registry ${this.registry}`),this.version=`${i}-${n.getUTCHours()}${n.getUTCMinutes()}`}catch{this.version=i}}this.version&&await this.$(`yarn @bud version ${this.version}`),await this.$("yarn @bud build --force"),await this.$(`yarn workspaces foreach --no-private npm publish --access public --tag ${(r=this.tag)!=null?r:"latest"}`)}};At.label="@bud release",At.paths=[["@bud","release"]],At.usage={category:"@bud",description:"Do a release.",examples:[["Bump packages to x.y.z and publish","yarn @bud release --version x.y.z --tag latest"]]};var Ji=y("clipanion");var Mt=class extends f{constructor(){super(...arguments);this.tasks=Ji.Option.Array("--",{description:"task to run"})}async execute(){await this.tasks.reduce(async(r,n)=>(await r,await this.$(`yarn @bud ${n}`),Promise.resolve()),Promise.resolve())}};Mt.label="@bud run",Mt.paths=[["@bud","run"]],Mt.usage={category:"@bud",description:"run a series of bud commands",examples:[["","yarn @bud run"]]};var Ui=y("clipanion"),Hi=y("path/posix");var ot=class extends f{constructor(){super(...arguments);this.passthrough=Ui.Option.Proxy({name:"vitest passthrough options"})}async execute(){await this.$("yarn @bud registry start"),await this.$("yarn @bud registry clean"),await this.$("yarn @bud release --tag latest");try{await this.$(this.withPassthrough(`yarn vitest --config ${(0,Hi.join)(d.root,"config/vitest.e2e.config.ts")}`))}catch{await this.$("yarn @bud registry stop")}await this.$("yarn @bud registry stop")}};ot.label="@bud test",ot.paths=[["@bud","test","e2e"]],ot.usage={category:"@bud",description:"run e2e tests",examples:[["run e2e tests","yarn @bud test e2e"]]};var Gi=y("clipanion"),Qt=yt(jt()),pe=y("path/posix");var st=class extends f{constructor(){super(...arguments);this.passthrough=Gi.Option.Proxy({name:"jest passthrough options"})}async execute(){await(0,Qt.ensureFile)((0,pe.join)(d.root,"storage/yarn.lock")),await(0,Qt.ensureDir)((0,pe.join)(d.root,"storage/mocks")),await(0,Qt.remove)((0,pe.join)(d.root,"storage/mocks")),this.log("integration tests directory cleaned"),await this.$("yarn @bud registry start"),await this.$("yarn @bud registry clean"),await this.$("yarn @bud release --tag latest");try{await this.$(this.withPassthrough(`yarn vitest --config ${(0,pe.join)(d.root,"config/vitest.integration.config.js")}`))}catch{await this.$("yarn @bud registry stop")}await this.$("yarn @bud registry stop")}};st.label="@bud test integration",st.paths=[["@bud","test","integration"]],st.usage={category:"@bud",description:"run integration tests",examples:[["run integration tests","yarn @bud test integration"]]};var Vi=y("clipanion"),Yi=y("path/posix");var at=class extends f{constructor(){super(...arguments);this.passthrough=Vi.Option.Proxy({name:"vitest passthrough options"})}async execute(){await this.$(this.withPassthrough(`yarn vitest --config ${(0,Yi.join)(d.root,"config/vitest.unit.config.ts")}`))}};at.label="@bud test unit",at.paths=[["@bud","test","unit"]],at.usage={category:"@bud",description:"run unit tests",examples:[["run unit tests","yarn @bud test unit"]]};var cu=[ot,st,at],Rt=class extends f{async execute(){process.stdout.write(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),Object.values(cu).filter(e=>e.usage).forEach(e=>{var r;(r=e.usage.examples)==null||r.forEach(([n,i])=>{process.stdout.write(`
\x1B[34m${i}\x1B[0m  ${n}
`)})})}};Rt.label="@bud test",Rt.paths=[["@bud","test"]],Rt.usage={category:"@bud",description:"run tests",examples:[["run e2e tests","yarn @bud test e2e"],["run unit tests","yarn @bud test unit"],["run integration tests","yarn @bud test integration"]]};var Ki=y("clipanion"),zi=y("path");var Wt=class extends f{constructor(){super(...arguments);this.tsconfig=(0,zi.join)(d.config,"tsconfig.json");this.passthrough=Ki.Option.Proxy({name:"tsc options"})}async execute(){await this.$(this.withPassthrough(`yarn tsc -b ${this.tsconfig}`))}};Wt.label="@bud tsc",Wt.paths=[["@bud","tsc"],["@bud","build"]],Wt.usage={category:"@bud",description:"Run the typescript compiler",examples:[["run the typescript compiler","yarn @bud tsc"],["run the typescript compiler in watch mode","yarn @bud tsc --watch"],["run the typescript compiler with forced rebuild (no incremental compilation)","yarn @bud tsc --force"]]};var Xi=y("clipanion"),rr=y("path");var Bt=class extends f{constructor(){super(...arguments);this.request=Xi.Option.Rest()}async execute(){let r=(0,rr.join)(d.config,"tsconfig.json"),n=(0,rr.join)(d.sources,"@repo/compile-kit/src/vendor/index.js");await this.$(`yarn ts-node-esm --project ${r} ${n} ${this.request}`)}};Bt.label="@bud vendor",Bt.paths=[["@bud","vendor"]],Bt.usage={category:"@bud",description:"vendor a package"};var Qi=y("clipanion");var Jt=class extends f{constructor(){super(...arguments);this.version=Qi.Option.String()}async execute(){if(!this.version){let{version:r}=await this.getManifest();this.version=r}await this.$(`yarn workspaces foreach --no-private package set version ${this.version}`)}};Jt.label="@bud version",Jt.paths=[["@bud","version"]],Jt.usage={category:"@bud",description:"bump version of public packages",examples:[["Bump packages to x.y.z","yarn @bud version x.y.z"]]};var ye={Bud:Gt,Clean:wt,CI:bt,Compile:vt,Dev:xt,Docs:Ct,DocsDev:St,DocsNetlify:_t,Format:Pt,Info:Xt,Lint:qt,LintDependencies:Ot,LintExports:Ft,Pm2:Nt,RegistryClean:Tt,RegistryInstall:Dt,RegistryStart:It,RegistryStop:Lt,Release:At,RunCommand:Mt,TestE2E:ot,TestIntegration:st,TestUnit:at,TestRun:Rt,Tsc:Wt,Vendor:Bt,Version:Jt};var Zt=y("@yarnpkg/shell"),Zi=async()=>{try{await(0,Zt.execute)("yarn",["@bud","registry","install"],{stdin:process.stdin,stdout:process.stdout})}catch(t){throw t.name=`@bud registry install: ${t.name}`,t}try{await(0,Zt.execute)("yarn",["workspace","@repo/yarn-plugin-bud","build"],{stdin:process.stdin,stdout:process.stdout})}catch(t){throw t.name=`@bud cli build: ${t.name}`,t}try{process.stdout.write("Rolling up bud dependencies..."),await(0,Zt.execute)("yarn",["rollup","--config","config/rollup/rollup.config.js"])}catch(t){throw t.name=`rollup error: ${t.name}`,t}try{await(0,Zt.execute)("yarn",["workspace","@roots/browserslist-config","exec","node","./scripts/postinstall.mjs"],{stdin:process.stdin,stdout:process.stdout})}catch(t){throw t.name=`@roots/browserslist-config postinstall error: ${t.name}`,t}try{await(0,Zt.execute)("yarn",["@bud","build","--force"],{stdin:process.stdin,stdout:process.stdout})}catch(t){throw t.name=`@bud build error: ${t.name}`,t}};var to=async(t,e)=>{e.BUD_DEVELOPMENT_ENV=!0};var uu={hooks:{afterAllInstalled:Zi,setupScriptEnvironment:to},commands:Object.values(ye)},lu=uu;return so(pu);})();
return plugin;
}
};
